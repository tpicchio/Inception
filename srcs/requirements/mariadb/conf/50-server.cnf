# Configurazione del server MariaDB
[mysqld]

# Porta su cui ascolta MariaDB
port = 3306

# Bind address per permettere le connessioni remote (0.0.0.0 per consentire l'accesso da qualunque IP)
bind-address = 0.0.0.0

# Directory dei dati (gestita da Docker tramite volume)
datadir = /var/lib/mysql

# Sicurezza: Evita di caricare plugin non necessari e ottimizza la memoria
skip-host-cache
skip-name-resolve

# Imposta la codifica di default per il database
character-set-server = utf8mb4
collation-server = utf8mb4_general_ci

# Limiti di memoria e performance
max_connections = 100
innodb_buffer_pool_size = 256M
innodb_log_file_size = 64M

# Tempo di attesa prima di chiudere una connessione inattiva
wait_timeout = 600

# Log delle query lente (opzionale, utile per il debug)
slow_query_log = 1
slow_query_log_file = /var/log/mysql/slow.log
long_query_time = 2

# Logging degli errori
log_error = /var/log/mysql/error.log

# Abilita il file di stato per il processo mysqld
pid-file = /var/run/mysqld/mysqld.pid

# Abilita la replica binaria (necessario se pensi di usare replica)
log-bin=mysql-bin

# Disabilita il secure-file-priv se usi import/export di file (opzionale)
secure-file-priv = ""
